"use strict";const e={string:function(e){return"string"==typeof e},object:function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},array:function(e){return Array.isArray(e)},bool:function(e){return"boolean"==typeof e},number:function(e){return"number"==typeof e},func:function(e){return"function"==typeof e},nul:function(e){return null===e},undef:function(e){return void 0===e||void 0===e}};function n(n,t,r,i){this.name=n,this.namespace=t,this.func=r,this.priority=e.number(i)?i:1}function t(t){this.config={},Object.defineProperty(this.config,"maxListeners",{value:t&&"number"==typeof t.maxListeners?t.maxListeners:50,writable:!1,enumerable:!0}),Object.defineProperty(this.config,"maxOnceListeners",{value:t&&"number"==typeof t.maxOnceListeners?t.maxOnceListeners:50,writable:!1,enumerable:!0});const r=[],i=[],s=e=>r.filter((n=>n.name===e)).length>=this.config.maxListeners,o=e=>i.filter((n=>n.name===e)).length>=this.config.maxListeners,a=(e,n)=>{let t=r.length;for(;t;)if(t-=1,r[t].name===e&&r[t].namespace===n)return t;return-1};this.register=(t,i,o,f)=>{if(!t)return;if(void 0!==f&&!e.number(f))throw new Error("priority must be a number");if(e.func(i))if(e.string(o)){const e=o;o=i,i=e}else e.number(o)&&(f=o),o=i,i="all";const u=a(t,i),l=new n(t,i,o,f);-1===u?s(t)?console.warn(`Max listeners reached for event ${t}`):r.push(l):r[u]=l,r.sort(((e,n)=>e.priority===n.priority?0:e.priority<n.priority?1:-1))},this.on=this.register,this.subscribe=this.register,this.once=(e,t)=>{if(!e)return;const r=new n(e,"",t);o(e)?console.warn(`Max once listeners reached for event ${e}`):i.push(r)},this.onMany=(e,n)=>{n&&Object.keys(n).forEach((t=>{this.on(t,e,n[t])}))},this.unregister=(e,n)=>{if(!e)return;let t=0;if("all"!==(n=n||"all"))t=a(e,n),-1!==t&&r.splice(t,1);else{for(t=r.length;t;)t-=1,r[t].name===e&&"all"===r[t].namespace&&r.splice(t,1);for(t=i.length;t;)t-=1,i[t].name===e&&i.splice(t,1)}},this.off=this.unregister,this.unsubscribe=this.unregister,this.offAll=e=>{let n=r.length;for(;n;)n-=1,r[n].namespace===e&&r.splice(n,1)};this.trigger=(e,n)=>{const t=(e=>{const n=[];for(let t=0,i=r.length;t<i;t+=1)((r[t].name.indexOf("*")>-1||r[t].name.indexOf("?")>-1)&&new RegExp(r[t].name.replace(/\*/g,".*")).test(e)||r[t].name===e)&&n.push(r[t]);return n})(e);for(let r=0,i=t.length;r<i;r+=1)t[r].func(n,e);((e,n)=>{let t=i.length;for(;t;)t-=1,((i[t].name.indexOf("*")>-1||i[t].name.indexOf("?")>-1)&&new RegExp(i[t].name.replace(/\*/g,".*").replace(/\?/g,".")).test(e)||i[t].name===e)&&(i[t].func(n,e),i.splice(t,1))})(e,n)},this.emit=this.trigger,this.publish=this.trigger,this.propagate=(e,n)=>{this.trigger(n,e)},this.isRegistered=(e,n)=>{n=n||"all";let t=r.length;for(;t;)if(t-=1,r[t].namespace===n&&r[t].name===e)return!0;for(t=i.length;t;)if(t-=1,i[t].name===e)return!0;return!1}}t.HIGH_PRIORITY=2,t.NORMAL_PRIORITY=1,t.LOW_PRIORITY=0,module.exports=t;
