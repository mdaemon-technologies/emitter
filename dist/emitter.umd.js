!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).emitter=t()}(this,(function(){"use strict";const e=require("./is");function t(e,t,i){this.name=e,this.id=t,this.func=i}return function(){const i=[],s=[],n=(e,t)=>{let s=i.length;for(;s;)if(s-=1,i[s].name===e&&i[s].id===t)return s;return-1};this.register=(s,r,h)=>{const l=s;let f=h,o=r;if(e.func(o))if(e.string(f)){const e=f;f=o,o=e}else f=r,o="all";if(!l)return;const u=n(l,o),c=new t(l,o,f);-1===u?i.push(c):i[u]=c},this.on=this.register,this.subscribe=this.register,this.once=(e,i)=>{if(!e)return;const n=new t(e,"",i);s.push(n)},this.onMany=(e,t)=>{t&&Object.keys(t).forEach((i=>{this.on(i,e,t[i])}))},this.unregister=(e,t)=>{if(!e)return;let r=0;if("all"!==(t||"all"))for(r=n(e,t),-1!==r&&i.splice(r,1),r=s.length;r;)r-=1,s[r].name===e&&s.splice(r,1);else for(r=i.length;r;)r-=1,"all"===i[r].id&&i.splice(r,1)},this.off=this.unregister,this.unsubscribe=this.unregister,this.offAll=e=>{let t=i.length;for(;t;)t-=1,i[t].id===e&&i.splice(t,1)},this.trigger=(e,t)=>{const n=(e=>{const t=[];for(let s=0,n=i.length;s<n;s+=1)i[s].name===e&&t.push(i[s]);return t})(e);for(let i=0,s=n.length;i<s;i+=1)n[i].func(t,e);let r=s.length;for(;r;)r-=1,s[r].name===e&&(s[r].func(t,e),s.splice(r,1))},this.emit=this.trigger,this.publish=this.trigger,this.propagate=(e,t)=>{this.trigger(t,e)},this.isRegistered=(e,t)=>{let s=i.length;for(;s;)if(s-=1,i[s].id===t&&i[s].name===e)return!0;return!1}}}));
