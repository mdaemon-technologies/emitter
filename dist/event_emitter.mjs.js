import i from"is";function n(i,n,t){this.name=i,this.id=n,this.func=t}function t(){var t=[],r=[],e=function(i,n){for(var r=t.length;r--;)if(t[r].name===i&&t[r].id===n)return r;return-1};this.register=function(r,f,s){if(i.func(f))if(i.string(s)){var o=s;s=f,f=o}else s=f,f="all";if(r){var h=e(r,f),a=new n(r,f,s);-1===h?t.push(a):t[h]=a}},this.on=this.register,this.once=function(i,t){if(i){var e=new n(i,"",t);r.push(e)}},this.onMany=function(i,n){if(n)for(var t in n)this.on(t,i,n[t])},this.unregister=function(i,n){if(n||(n="all"),i){var f=0;if("all"!==n)for(-1!==(f=e(i,n))&&t.splice(f,1),f=r.length;f--;)r[f].name===i&&r.splice(f,1);else for(f=t.length;f--;)"all"===t[f].id&&t.splice(f,1)}},this.off=this.unregister,this.offAll=function(i){for(var n=t.length;n--;)t[n].id===i&&t.splice(n,1)},this.trigger=function(i,n){for(var e=function(i){for(var n=[],r=0,e=t.length;r<e;r++)t[r].name===i&&n.push(t[r]);return n}(i),f=0,s=e.length;f<s;f++)e[f].func(n,i);for(var o=r.length;o--;)r[o].name===i&&(r[o].func(n,i),r.splice(o,1))},this.emit=this.trigger,this.propagate=function(i,n){this.trigger(n,i)},this.isRegistered=function(i,n){for(var r=t.length;r--;)if(t[r].id===n&&t[r].name===i)return!0;return!1}}export{t as default};
