"use strict";function i(i){return i&&"object"==typeof i&&"default"in i?i:{default:i}}var t=i(require("is"));function n(i,t,n){this.name=i,this.id=t,this.func=n}module.exports=function(){var i=[],e=[],r=function(t,n){for(var e=i.length;e--;)if(i[e].name===t&&i[e].id===n)return e;return-1};this.register=function(e,f,s){if(t.default.func(f))if(t.default.string(s)){var u=s;s=f,f=u}else s=f,f="all";if(e){var o=r(e,f),a=new n(e,f,s);-1===o?i.push(a):i[o]=a}},this.on=this.register,this.once=function(i,t){if(i){var r=new n(i,"",t);e.push(r)}},this.onMany=function(i,t){if(t)for(var n in t)this.on(n,i,t[n])},this.unregister=function(t,n){if(n||(n="all"),t){var f=0;if("all"!==n)for(-1!==(f=r(t,n))&&i.splice(f,1),f=e.length;f--;)e[f].name===t&&e.splice(f,1);else for(f=i.length;f--;)"all"===i[f].id&&i.splice(f,1)}},this.off=this.unregister,this.offAll=function(t){for(var n=i.length;n--;)i[n].id===t&&i.splice(n,1)},this.trigger=function(t,n){for(var r=function(t){for(var n=[],e=0,r=i.length;e<r;e++)i[e].name===t&&n.push(i[e]);return n}(t),f=0,s=r.length;f<s;f++)r[f].func(n,t);for(var u=e.length;u--;)e[u].name===t&&(e[u].func(n,t),e.splice(u,1))},this.emit=this.trigger,this.propagate=function(i,t){this.trigger(t,i)},this.isRegistered=function(t,n){for(var e=i.length;e--;)if(i[e].id===n&&i[e].name===t)return!0;return!1}};
