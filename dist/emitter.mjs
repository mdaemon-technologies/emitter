var e={string:function(e){return"string"==typeof e},object:function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},array:function(e){return Array.isArray(e)},bool:function(e){return"boolean"==typeof e},number:function(e){return"number"==typeof e},func:function(e){return"function"==typeof e},nul:function(e){return null===e},undef:function(e){return void 0===e||void 0===e}};function t(t,n,i,r){this.name=t,this.namespace=n,this.func=i,this.priority=e.number(r)?r:1}var n=function(){function n(n){var i=this;this._emitter_events=[],this._emitter_oneTime=[],this.reachedMaxListeners=function(e){return i._emitter_events.filter((function(t){return t.name===e})).length>=i._emitter_config.maxListeners},this.reachedMaxOnceListeners=function(e){return i._emitter_oneTime.filter((function(t){return t.name===e})).length>=i._emitter_config.maxListeners},this.getEventIndex=function(e,t){for(var n=i._emitter_events.length;n;)if(n-=1,i._emitter_events[n].name===e&&i._emitter_events[n].namespace===t)return n;return-1},this.getEvents=function(e){for(var t=[],n=0,r=i._emitter_events.length;n<r;n+=1){if(i._emitter_events[n].name.indexOf("*")>-1||i._emitter_events[n].name.indexOf("?")>-1)if(new RegExp(i._emitter_events[n].name.replace(/\*/g,".*")).test(e)){t.push(i._emitter_events[n]);continue}i._emitter_events[n].name===e&&t.push(i._emitter_events[n])}return t},this.register=function(n,r,s,o){if(n){var m,_="all",a=1;void 0!==o&&e.number(o)&&(a=o),e.func(r)?e.string(s)?(m=r,_=s):(e.number(s)&&(a=s),m=r,_="all"):(_=r,m=s);var f=i.getEventIndex(n,_),c=new t(n,_,m,a);-1===f?i.reachedMaxListeners(n)?console.warn("Max listeners reached for event ".concat(n)):i._emitter_events.push(c):i._emitter_events[f]=c,i._emitter_events.sort((function(e,t){return e.priority===t.priority?0:e.priority<t.priority?1:-1}))}},this.on=this.register,this.subscribe=this.register,this.once=function(e,n){if(e){var r=new t(e,"",n,1);i.reachedMaxOnceListeners(e)?console.warn("Max once listeners reached for event ".concat(e)):i._emitter_oneTime.push(r)}},this.onMany=function(e,t){t&&Object.keys(t).forEach((function(n){i.on(n,e,t[n])}))},this.unregister=function(e,t){if(void 0===t&&(t="all"),e){var n=0;if("all"!==(t=t||"all"))-1!==(n=i.getEventIndex(e,t))&&i._emitter_events.splice(n,1);else{for(n=i._emitter_events.length;n;)n-=1,i._emitter_events[n].name===e&&"all"===i._emitter_events[n].namespace&&i._emitter_events.splice(n,1);for(n=i._emitter_oneTime.length;n;)n-=1,i._emitter_oneTime[n].name===e&&i._emitter_oneTime.splice(n,1)}}},this.off=this.unregister,this.unsubscribe=this.unregister,this.offAll=function(e){for(var t=i._emitter_events.length;t;)t-=1,i._emitter_events[t].namespace===e&&i._emitter_events.splice(t,1)},this.triggerOneTime=function(e,t){for(var n=i._emitter_oneTime.length;n;){if(n-=1,i._emitter_oneTime[n].name.indexOf("*")>-1||i._emitter_oneTime[n].name.indexOf("?")>-1)if(new RegExp(i._emitter_oneTime[n].name.replace(/\*/g,".*").replace(/\?/g,".")).test(e)){i._emitter_oneTime[n].func(t,e),i._emitter_oneTime.splice(n,1);continue}i._emitter_oneTime[n].name===e&&(i._emitter_oneTime[n].func(t,e),i._emitter_oneTime.splice(n,1))}},this.trigger=function(e,t){for(var n=i.getEvents(e),r=0,s=n.length;r<s;r+=1)n[r].func(t,e);i.triggerOneTime(e,t)},this.emit=this.trigger,this.publish=this.trigger,this.propagate=function(e,t){i.trigger(t,e)},this.isRegistered=function(e,t){t=t||"all";for(var n=i._emitter_events.length;n;)if(n-=1,i._emitter_events[n].namespace===t&&i._emitter_events[n].name===e)return!0;for(n=i._emitter_oneTime.length;n;)if(n-=1,i._emitter_oneTime[n].name===e)return!0;return!1},this._emitter_config=n||{maxListeners:50,maxOnceListeners:50}}return Object.defineProperty(n.prototype,"config",{get:function(){return this._emitter_config},enumerable:!1,configurable:!0}),n.HIGH_PRIORITY=2,n.NORMAL_PRIORITY=1,n.LOW_PRIORITY=0,n}();export{n as default};
